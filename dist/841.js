"use strict";(globalThis.webpackChunkblock_revealer=globalThis.webpackChunkblock_revealer||[]).push([[841],{784:(e,t,o)=>{o.d(t,{A:()=>r});class r{constructor(){this.colors={blue:"#1989c1",white:"#b1b1b1",black:"#444343"}}getColors(){return Object.values(this.colors)}findColor(e){let t=this.colors;return Object.keys(t).forEach((o=>{if(e===t[o])return o})),""}}},841:(e,t,o)=>{o.r(t),o.d(t,{default:()=>l});var r=o(784),s=o(196);class l{constructor(){this.bodyNodes=this.getBodyNodes()}init({reveal:e=!1,color:t="blue"}){this.setPluginClass("wp-block-revealer"),this.setColor(t),this.setReveal(e),this.bodyNodeObserver(),this.storage=new s.A,this.colors=new r.A}getBodyNodes(){let e=[],t=this.domBody();return e.push(t),document.body!==t&&e.push(document.body),e}getBody(){return this.domBody()}isPostEditorIframe(){return!document.querySelector(".block-editor-writing-flow")}isSiteEditor(){return!!document.querySelector(".edit-site-visual-editor")}domBody(){let e=null,t=this.isPostEditorIframe()?document.querySelector('iframe[name="editor-canvas"]'):document.querySelector(".block-editor-writing-flow");return t&&this.isPostEditorIframe()&&(e=t.contentWindow.document.body),this.isSiteEditor()&&(t=document.querySelector('iframe[name="editor-canvas"]'),e=t.contentWindow.document.body),!t||this.isPostEditorIframe()||this.isSiteEditor()||(e=document.querySelector("body")),e}setPluginClass(e){this.bodyNodes.forEach((t=>{t.classList.add(e)}))}removePluginClass(e){this.bodyNodes.forEach((t=>{t.classList.remove(e)}))}setColor(e){e||(e="blue"),this.bodyNodes.forEach((t=>{t.style.setProperty("--wpbr--editor--shadow--color","var( --wpbr--color--"+e+" )"),t.style.setProperty("--wpbr--editor--shadow--color-hover","var( --wpbr--color--"+e+"-hover )")}))}setReveal(e){this.bodyNodes.forEach((t=>{e?t.classList.add("wp-block-revealer--reveal"):t.classList.remove("wp-block-revealer--reveal")}))}bodyNodeObserver(){let e=this.domBody();e&&new MutationObserver(((e,t)=>{for(let t of e)if("attributes"===t.type&&"class"===t.attributeName){let e=getComputedStyle(t.target).getPropertyValue("--wpbr--editor--shadow--color");this.colors.findColor(e)!==this.storage.getColor()&&this.setColor(this.storage.getColor()),!0!==this.storage.getReveal()||t.target.classList.contains("wp-block-revealer--reveal")||this.setReveal(this.storage.getReveal()),!1===this.storage.getReveal()&&t.target.classList.contains("wp-block-revealer--reveal")&&this.setReveal(this.storage.getReveal())}})).observe(e,{attributes:!0,childList:!1,subtree:!1})}keepChildAlive(e,t){setInterval((()=>{let o=null,r=document.querySelector(e);r&&(o=r.querySelector("#block-revealer-root")),o||r.appendChild(t)}),1200)}}},196:(e,t,o)=>{o.d(t,{A:()=>s});var r=o(784);class s{constructor(){}getColor(){return null===window.localStorage.getItem("wpbr_options__color")?"blue":window.localStorage.getItem("wpbr_options__color")}getReveal(){return"true"===window.localStorage.getItem("wpbr_options__reveal")}setColor(e){(new r.A).getColors().indexOf(e)>-1&&(e="blue"),window.localStorage.setItem("wpbr_options__color",e)}setReveal(e){let t=!0===e?"true":"false";window.localStorage.setItem("wpbr_options__reveal",t)}}}}]);